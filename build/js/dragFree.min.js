!function(t){function e(t){this.opt=t,this.init(t),this.isDown=!1}window.qs=function(t){return document.querySelector(t)},window.tplId=(new Date).getTime().toString().substr(8),e.prototype={init:function(t){var e=this;this.el=t.el,this.$el=$(t.el);var o=t.el.toString().substr(0,1);"#"===o?(t.moveOnly?this.dragMoveOnly():this.drag(this.$el),this.$el.css("cursor","move")):"."===o&&this.$el.on("click",function(t){t.target.parentNode.outerHTML&&console.log($(t.target)),e.drag($(t.target))})},drag:function(t){var e=this;t.on("mousedown",function(o){var n=t;e.isDown=!0;var i={x:this.offsetLeft,y:this.offsetTop},s=o.clientX-i.x,r=o.clientY-i.y;e.watchMousePs(function(t){var e={x:t.x-s,y:t.y-r};n.css({position:"absolute",top:e.y,left:e.x}),n.addClass("draging")})}),t.on("mouseup",function(){e.isDown=!1,$(".dr-tpl").remove(),$(this).removeClass("draging")}),e.opt.callback&&e.opt.callback()},dragMoveOnly:function(){var t=this;this.$el.on("mouseenter",function(e){var o=t.$el;t.isDown=!0;var n={x:this.offsetLeft,y:this.offsetTop},i=e.clientX-n.x,s=e.clientY-n.y;t.watchMousePs(function(e){var n={x:e.x-i,y:e.y-s};o.css({position:"absolute",top:n.y,left:n.x}),o.addClass("draging"),t.opt.callback&&t.opt.callback(n)})}),this.$el.on("mouseup",function(){t.isDown=!1,$(".dr-tpl").remove(),$(this).removeClass("draging")})},$error:function(t){console.log(t)},watchMousePs:function(t){var e=this;document.addEventListener("mousemove",function(o){var n={x:o.clientX,y:o.clientY};t&&e.isDown&&t(n)})}},"function"==typeof define&&(define.amd||define.cmd)?define("DragFree",["jQuery"],function(){return e}):window.DragFree=e}(this);