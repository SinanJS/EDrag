!function(t){function e(t){this.opt=t,this.init(t),this.isDown=!1}window.qs=function(t){return document.querySelector(t)},window.tplId=(new Date).getTime().toString().substr(8),e.prototype={init:function(t){this.el=t.el,this.$el=$(t.el),this._el=document.querySelectorAll(t.el),this.childrenList=new Set;t.el.toString().substr(0,1);t.moveOnly?this.dragMoveOnly():this.drag(this.$el),this.$el.css("cursor","move")},drag:function(t){var e=this;this.mapDOM(t),t.on("mousedown",function(t){e.selectDOM(t)}),t.on("mouseup",function(t){e.freeDOM(t)}),e.opt.callback&&e.opt.callback()},dragMoveOnly:function(){var t=this;this.$el.on("mouseenter",function(e){var n=t.$el;t.isDown=!0;var i={x:this.offsetLeft,y:this.offsetTop},r=e.clientX-i.x,o=e.clientY-i.y;t.watchMousePs(function(e){var i={x:e.x-r,y:e.y-o};n.css({position:"absolute",top:i.y,left:i.x}),n.addClass("draging"),t.opt.callback&&t.opt.callback(i)})}),this.$el.on("mouseup",function(){t.isDown=!1,$(".dr-tpl").remove(),$(this).removeClass("draging")})},$error:function(t){console.log(t)},mapDOM:function(t){for(var e=0;e<t.length;e++)for(var n=t[e],i=0;i<n.children.length;i++){var r=n.children[i];r.setAttribute("dragfree",!0)}},confirmTarget:function(t){var e=$(t);return void 0!==e.attr("dragfree")?t:1===e.find('[dragfree="true"]').length?e.find('[dragfree="true"]')[0]:1===e.parent('[dragfree="true"]').length&&e.parent('[dragfree="true"]')[0]},selectDOM:function(t,e){return function(){this.target=this.confirmTarget(t.target),this.target&&$(this.target).addClass("draging"),this.isDown=!0;var e={x:$(".draging")[0].offsetLeft,y:$(".draging")[0].offsetTop},n=t.clientX-e.x,i=t.clientY-e.y;this.watchMousePs(function(t){var e={x:t.x-n,y:t.y-i};$(".draging").css({position:"absolute",top:e.y,left:e.x})})}.call(e||this)},watchMousePs:function(t){var e=this;document.addEventListener("mousemove",function(n){var i={x:n.clientX,y:n.clientY};t&&e.isDown&&t(i)})},freeDOM:function(t,e){return function(){this.isDown=!1,$(".dr-tpl").remove(),$(this.target).removeClass("draging")}.call(e||this)}},"function"==typeof define&&(define.amd||define.cmd)?define("DragFree",["jQuery"],function(){return e}):window.DragFree=e}(this);